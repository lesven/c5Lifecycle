{% extends 'form_base.html.twig' %}

{% set form_title = 'Außerbetriebnahme RZ-Asset' %}
{% set form_icon = '⛔' %}
{% set form_subtitle = 'C5 Evidence · RZ · Außerbetriebnahme' %}
{% set track_class = 'track-a' %}
{% set track_label = 'Track A – RZ-Hardware' %}
{% set badge_class = 'badge-a' %}
{% set event_type = 'rz_retire' %}

{% block form_fields %}
    <fieldset class="form-section">
      <legend>Asset-Daten</legend>
      <div class="field-group">
        <label for="asset_id">Asset-ID <span class="required-marker">*</span></label>
        <input type="text" id="asset_id" name="asset_id" required>
      </div>
      <div class="field-group">
        <label for="retire_date">Datum Stilllegung <span class="required-marker">*</span></label>
        <input type="date" id="retire_date" name="retire_date" required>
      </div>
      <div class="field-group">
        <label for="reason">Grund <span class="required-marker">*</span></label>
        <select id="reason" name="reason" required>
          <option value="">– Bitte wählen –</option>
          <option>EOL</option>
          <option>Defekt</option>
          <option>Migration</option>
          <option>Sonstiges</option>
        </select>
      </div>
      <div class="field-group">
        <label for="owner_approval">Freigabe durch Owner <span class="required-marker">*</span></label>
        <select id="owner_approval" name="owner_approval" required>
          <option value="">– Wird geladen … –</option>
        </select>
        <input type="hidden" id="contact_id" name="contact_id">
      </div>
      <div class="field-group">
        <label for="followup">Folgeweg <span class="required-marker">*</span></label>
        <select id="followup" name="followup" required>
          <option value="">– Bitte wählen –</option>
          <option>Entsorgung</option>
          <option>Leasing-Rückgabe</option>
          <option>Ersatzteilspender</option>
        </select>
      </div>
      <div class="field-group">
        <label for="tenant_id">Mandant</label>
        <select id="tenant_id" name="tenant_id">
          <option value="">– Wird geladen … –</option>
        </select>
        <input type="hidden" id="tenant_name" name="tenant_name">
      </div>
    </fieldset>

    <fieldset class="form-section">
      <legend>Data Handling</legend>
      <div class="radio-group">
        <div class="field-checkbox">
          <label class="checkbox-label">
            <input type="radio" name="data_handling" value="Secure Wipe" required>
            <span>Secure Wipe</span>
          </label>
        </div>
        <div class="field-checkbox">
          <label class="checkbox-label">
            <input type="radio" name="data_handling" value="Physische Zerstörung">
            <span>Physische Zerstörung</span>
          </label>
        </div>
        <div class="field-checkbox">
          <label class="checkbox-label">
            <input type="radio" name="data_handling" value="Löschzertifikat Dienstleister">
            <span>Löschzertifikat Dienstleister</span>
          </label>
        </div>
        <div class="field-checkbox">
          <label class="checkbox-label">
            <input type="radio" name="data_handling" value="Nicht relevant">
            <span>Nicht relevant</span>
          </label>
        </div>
      </div>
      <div class="field-group" id="data_handling_ref_group">
        <label for="data_handling_ref">Nachweisreferenz <span class="required-marker">*</span></label>
        <input type="text" id="data_handling_ref" name="data_handling_ref" data-conditional-required="data_handling:!Nicht relevant" placeholder="Pflicht wenn Data Handling ≠ Nicht relevant">
      </div>
    </fieldset>
{% endblock %}
